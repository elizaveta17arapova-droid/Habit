<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ß–µ–ª–ª–µ–Ω–¥–∂–∏</title>
<link rel="stylesheet" href="style.css">
<style>
body { background: #f0f2f5; font-family: Arial, sans-serif; margin: 0; }
header { background: #667eea; padding: 20px; text-align: center; color: white; font-size: 24px; }
.challenge-list { padding: 20px; display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 20px; }
.challenge-card { background: white; border-radius: 14px; padding: 20px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); cursor: pointer; transition: 0.3s; }
.challenge-card:hover { transform: translateY(-5px); }
.challenge-card h3 { margin-top: 0; color: #333; }
.challenge-details { display: none; margin-top: 10px; }
.progress-bar { height: 12px; background: #ddd; border-radius: 6px; margin: 10px 0; overflow: hidden; }
.progress-inner { height: 100%; background: #667eea; width: 0%; transition: 0.3s; }
.daily-plan { list-style: none; padding: 0; margin-top: 10px; }
.daily-plan li { background: #f9f9f9; padding: 6px 10px; margin-bottom: 5px; border-radius: 6px; display: flex; justify-content: space-between; align-items: center; }
.daily-plan li.done { background: #d9f7d9; text-decoration: line-through; }
button { width: 100%; padding: 10px; background: #667eea; color: white; border: none; border-radius: 8px; font-size: 15px; cursor: pointer; margin-top: 10px; }
button:hover { background: #4a5ed1; }
.back { display: block; margin: 20px auto; text-align: center; width: 200px; padding: 12px; background: #4a5ed1; border-radius: 8px; text-decoration: none; color: white; }
.delete-btn { background: #f44336; margin-top: 5px; }
</style>
</head>

<body>
<header>üåü –ß–µ–ª–ª–µ–Ω–¥–∂–∏</header>

<div class="challenge-list">

    <!-- –ß–µ–ª–ª–µ–Ω–¥–∂ 1 -->
    <div class="challenge-card" data-id="challenge1">
        <h3>7 –¥–Ω–µ–π –∑–¥–æ—Ä–æ–≤–æ–≥–æ —Å–Ω–∞ üò¥</h3>
        <div class="challenge-details">
            <p>–ü–µ—Ä–µ–¥ —Å–Ω–æ–º ‚Äî –±–µ–∑ —Ç–µ–ª–µ—Ñ–æ–Ω–∞, 8 —á–∞—Å–æ–≤ –æ—Ç–¥—ã—Ö–∞.</p>
            <div class="progress-bar"><div class="progress-inner"></div></div>
            <p>–ü—Ä–æ–≥—Ä–µ—Å—Å: <span class="progress-text">0 / 7</span></p>
            <ul class="daily-plan">
                <li data-day="1">–î–µ–Ω—å 1: –õ–æ–∂–∏—Ç—å—Å—è —Å–ø–∞—Ç—å –¥–æ 23:00</li>
                <li data-day="2">–î–µ–Ω—å 2: –ú–∏–Ω–∏–º—É–º 8 —á–∞—Å–æ–≤ —Å–Ω–∞</li>
                <li data-day="3">–î–µ–Ω—å 3: –ù–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–µ—Ä–µ–¥ —Å–Ω–æ–º</li>
                <li data-day="4">–î–µ–Ω—å 4: –ú–µ–¥–∏—Ç–∞—Ü–∏—è –ø–µ—Ä–µ–¥ —Å–Ω–æ–º</li>
                <li data-day="5">–î–µ–Ω—å 5: –ß—Ç–µ–Ω–∏–µ –∫–Ω–∏–≥–∏ –≤–º–µ—Å—Ç–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞</li>
                <li data-day="6">–î–µ–Ω—å 6: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π —Ä–µ–∂–∏–º —Å–Ω–∞</li>
                <li data-day="7">–î–µ–Ω—å 7: –ü–æ–¥–≤–µ–¥–µ–Ω–∏–µ –∏—Ç–æ–≥–æ–≤ –Ω–µ–¥–µ–ª–∏</li>
            </ul>
            <button class="start-btn">–ù–∞—á–∞—Ç—å</button>
            <button class="complete-day-btn" disabled>–û—Ç–º–µ—Ç–∏—Ç—å –¥–µ–Ω—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º</button>
            <button class="delete-btn">–£–¥–∞–ª–∏—Ç—å —á–µ–ª–ª–µ–Ω–¥–∂</button>
        </div>
    </div>

    <!-- –ß–µ–ª–ª–µ–Ω–¥–∂ 2 -->
    <div class="challenge-card" data-id="challenge2">
        <h3>7 –¥–Ω–µ–π —Å–ø–æ—Ä—Ç–∞ üèÉ‚Äç‚ôÄÔ∏è</h3>
        <div class="challenge-details">
            <p>–ú–∏–Ω–∏–º—É–º 15 –º–∏–Ω—É—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å.</p>
            <div class="progress-bar"><div class="progress-inner"></div></div>
            <p>–ü—Ä–æ–≥—Ä–µ—Å—Å: <span class="progress-text">0 / 7</span></p>
            <ul class="daily-plan">
                <li data-day="1">–î–µ–Ω—å 1: 15 –º–∏–Ω—É—Ç —Ä–∞–∑–º–∏–Ω–∫–∏</li>
                <li data-day="2">–î–µ–Ω—å 2: 20 –º–∏–Ω—É—Ç —Ö–æ–¥—å–±—ã</li>
                <li data-day="3">–î–µ–Ω—å 3: 15 –º–∏–Ω—É—Ç —Å–∏–ª–æ–≤–æ–π —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</li>
                <li data-day="4">–î–µ–Ω—å 4: 20 –º–∏–Ω—É—Ç —Ä–∞—Å—Ç—è–∂–∫–∏</li>
                <li data-day="5">–î–µ–Ω—å 5: 15 –º–∏–Ω—É—Ç –∫–∞—Ä–¥–∏–æ</li>
                <li data-day="6">–î–µ–Ω—å 6: 15 –º–∏–Ω—É—Ç –π–æ–≥–∏</li>
                <li data-day="7">–î–µ–Ω—å 7: –ò—Ç–æ–≥–æ–≤–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</li>
            </ul>
            <button class="start-btn">–ù–∞—á–∞—Ç—å</button>
            <button class="complete-day-btn" disabled>–û—Ç–º–µ—Ç–∏—Ç—å –¥–µ–Ω—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º</button>
            <button class="delete-btn">–£–¥–∞–ª–∏—Ç—å —á–µ–ª–ª–µ–Ω–¥–∂</button>
        </div>
    </div>

    <!-- –ß–µ–ª–ª–µ–Ω–¥–∂ 3 -->
    <div class="challenge-card" data-id="challenge3">
        <h3>7 –¥–Ω–µ–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è ü•ó</h3>
        <div class="challenge-details">
            <p>–ö–∞–∂–¥—ã–π –¥–µ–Ω—å ‚Äî –ø–æ–ª–µ–∑–Ω—ã–π –ø—Ä–∏—ë–º –ø–∏—â–∏.</p>
            <div class="progress-bar"><div class="progress-inner"></div></div>
            <p>–ü—Ä–æ–≥—Ä–µ—Å—Å: <span class="progress-text">0 / 7</span></p>
            <ul class="daily-plan">
                <li data-day="1">–î–µ–Ω—å 1: –°—ä–µ—Å—Ç—å 2 –ø–æ—Ä—Ü–∏–∏ –æ–≤–æ—â–µ–π</li>
                <li data-day="2">–î–µ–Ω—å 2: –ü–æ–ª–µ–∑–Ω—ã–π –∑–∞–≤—Ç—Ä–∞–∫</li>
                <li data-day="3">–î–µ–Ω—å 3: –ó–∞–º–µ–Ω–∏—Ç—å —Å–ª–∞–¥–æ—Å—Ç–∏ —Ñ—Ä—É–∫—Ç–∞–º–∏</li>
                <li data-day="4">–î–µ–Ω—å 4: –ü–æ–ª–µ–∑–Ω—ã–π –æ–±–µ–¥</li>
                <li data-day="5">–î–µ–Ω—å 5: –ü–æ–ª–µ–∑–Ω—ã–π —É–∂–∏–Ω</li>
                <li data-day="6">–î–µ–Ω—å 6: –ü–∏—Ç—å –±–æ–ª—å—à–µ –≤–æ–¥—ã</li>
                <li data-day="7">–î–µ–Ω—å 7: –ò—Ç–æ–≥ –¥–Ω—è ‚Äî –∑–¥–æ—Ä–æ–≤–æ–µ –º–µ–Ω—é</li>
            </ul>
            <button class="start-btn">–ù–∞—á–∞—Ç—å</button>
            <button class="complete-day-btn" disabled>–û—Ç–º–µ—Ç–∏—Ç—å –¥–µ–Ω—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º</button>
            <button class="delete-btn">–£–¥–∞–ª–∏—Ç—å —á–µ–ª–ª–µ–Ω–¥–∂</button>
        </div>
    </div>

</div>

<a href="tracker.html" class="back">‚Üê –ù–∞–∑–∞–¥</a>

<script>
function loadProgress(id) {
    return Number(localStorage.getItem(id) || 0);
}
function saveProgress(id, value) {
    localStorage.setItem(id, value);
}
function updateCard(card) {
    const id = card.dataset.id;
    const progress = loadProgress(id);
    const progressText = card.querySelector(".progress-text");
    const progressInner = card.querySelector(".progress-inner");
    const completeBtn = card.querySelector(".complete-day-btn");

    progressText.textContent = `${progress} / 7`;
    progressInner.style.width = `${(progress / 7) * 100}%`;

    const isActive = localStorage.getItem('active_' + id);
    completeBtn.disabled = !isActive;

    const planItems = card.querySelectorAll(".daily-plan li");
    planItems.forEach(item => {
        const day = Number(item.dataset.day);
        item.classList.toggle("done", day <= progress);
    });
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
document.querySelectorAll(".challenge-card").forEach(card => {
    const id = card.dataset.id;
    const details = card.querySelector(".challenge-details");

    updateCard(card);

    // –ü–æ–∫–∞–∑ –¥–µ—Ç–∞–ª–µ–π
    card.querySelector("h3").addEventListener("click", () => {
        details.style.display = details.style.display === "block" ? "none" : "block";
    });

    // –ö–Ω–æ–ø–∫–∞ "–ù–∞—á–∞—Ç—å"
    card.querySelector(".start-btn").addEventListener("click", (e) => {
        e.stopPropagation();
        saveProgress(id, 0);
        localStorage.setItem('active_' + id, 1);
        updateCard(card);
        alert("–ß–µ–ª–ª–µ–Ω–¥–∂ –Ω–∞—á–∞—Ç! üí™");
    });

    // –ö–Ω–æ–ø–∫–∞ "–û—Ç–º–µ—Ç–∏—Ç—å –¥–µ–Ω—å –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º"
    card.querySelector(".complete-day-btn").addEventListener("click", (e) => {
        e.stopPropagation();
        let progress = loadProgress(id);
        if (progress < 7) {
            progress++;
            saveProgress(id, progress);
            updateCard(card);

            // === –ê–≤—Ç–æ-—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–π ===
            localStorage.setItem("first_habit_done", true);
            if (progress >= 3) localStorage.setItem("3_days_row", true);
            if (progress === 7) localStorage.setItem("7_days_challenge", true);

            if (progress === 7) alert("–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! üéâ –ß–µ–ª–ª–µ–Ω–¥–∂ –∑–∞–≤–µ—Ä—à—ë–Ω!");
        }
    });

    // –ö–Ω–æ–ø–∫–∞ "–£–¥–∞–ª–∏—Ç—å —á–µ–ª–ª–µ–Ω–¥–∂"
    card.querySelector(".delete-btn").addEventListener("click", (e) => {
        e.stopPropagation();
        if (confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç–æ—Ç —á–µ–ª–ª–µ–Ω–¥–∂?")) {
            saveProgress(id, 0);                   // —Å–±—Ä–æ—Å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
            localStorage.removeItem('active_' + id); // —É–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
            updateCard(card);                       // –æ–±–Ω–æ–≤–ª—è–µ–º –≤–∏–∑—É–∞–ª—å–Ω–æ –∫–∞—Ä—Ç–æ—á–∫—É
            alert("–ß–µ–ª–ª–µ–Ω–¥–∂ —É–¥–∞–ª—ë–Ω!");
        }
    });
});
</script>

</body>
</html>
